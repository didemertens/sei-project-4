(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{50:function(e,a,t){e.exports=t.p+"static/media/binacular.a273be44.jpg"},51:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIcAAACACAYAAAAh4nqyAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAaGVYSWZNTQAqAAAACAAEAQYAAwAAAAEAAgAAARIAAwAAAAEAAQAAASgAAwAAAAEAAgAAh2kABAAAAAEAAAA+AAAAAAADoAEAAwAAAAEAAQAAoAIABAAAAAEAAACHoAMABAAAAAEAAACAAAAAAOrj/QcAAALkaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpDb21wcmVzc2lvbj4xPC90aWZmOkNvbXByZXNzaW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MTI4PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT4xPC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4xMzU8L2V4aWY6UGl4ZWxYRGltZW5z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"},53:function(e,a,t){e.exports=t(97)},59:function(e,a,t){},97:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),l=t(28),c=t.n(l),r=t(7),i=t(27),o=(t(58),t(59),t(18)),m=t(5),u=t(6),d=function(){function e(){Object(m.a)(this,e)}return Object(u.a)(e,null,[{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"logout",value:function(){localStorage.removeItem("token")}},{key:"getPayload",value:function(){var e=this.getToken("token");if(!e)return!1;var a=e.split(".");return!(a.length<3)&&JSON.parse(atob(a[1]))}},{key:"isAuthenticated",value:function(){var e=this.getPayload();return!!e&&Math.round(Date.now()/1e3)<e.exp}}]),e}(),h=function(e){var a=e.component,t=Object(o.a)(e,["component"]);return d.isAuthenticated()?s.a.createElement(i.b,Object.assign({},t,{component:a})):(d.logout(),s.a.createElement(i.a,{to:"/login"}))},p=t(50),f=t.n(p),v=function(){return s.a.createElement("section",{className:"hero home-section is-fullheight-with-navbar"},s.a.createElement("div",{className:"columns home-columns"},s.a.createElement("div",{className:"column is-half home-column-left"},s.a.createElement("h1",{className:"title is-size-2-mobile is-size-2-tablet home-title"},">_Git Together",s.a.createElement("span",{className:"home-cursor"},"|")),s.a.createElement("h5",{className:"subtitle is-size-3 is-size-5-tablet is-size-5-mobile"},"and explore a world of code"),s.a.createElement(r.b,{to:"/questions",className:"button is-warning"},"Go to all questions")),s.a.createElement("div",{className:"column is-half home-column-right"},s.a.createElement("img",{className:"image home-image-bino",src:f.a,alt:"Girl with binoculars"}))))},b=t(4),g=t.n(b),E=t(11),N=t(8),A=t(9),y=t(10),w=t(12),x=t.n(w),k=t(16),O=t(51),C=t.n(O),j=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(t=Object(N.a)(this,(e=Object(A.a)(a)).call.apply(e,[this].concat(s)))).state={unseenChat:"",navbarOpen:!1},t.getUserData=Object(E.a)(g.a.mark((function e(){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("/api/users/".concat(d.getPayload().sub,"/chats/"));case 3:a=e.sent,n=a.data,t.setState({unseenChat:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),t.handleLogout=function(){d.logout(),t.props.history.push("/")},t.toggleNav=function(){t.setState({navbarOpen:!t.state.navbarOpen})},t}return Object(y.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){d.isAuthenticated()&&(this.getUserData(),setInterval(this.getUserData,4e3))}},{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&this.setState({navbarOpen:!1})}},{key:"render",value:function(){var e=d.getPayload(),a=this.state.navbarOpen;return s.a.createElement("nav",{className:"navbar is-white is-fixed-top"},s.a.createElement("div",{className:"navbar-brand"},s.a.createElement(r.b,{id:"navbar-item",to:"/",className:"navbar-item"},s.a.createElement("img",{className:"image is-24x24 nav-image",src:C.a,alt:"Git Together logo"}),"Git Together"),s.a.createElement(r.b,{to:"#",onClick:this.toggleNav,role:"button",id:"navbar-burger",className:"navbar-burger ".concat(a?"is-active":"")},s.a.createElement("span",null),s.a.createElement("span",null),s.a.createElement("span",null))),s.a.createElement("div",{className:"navbar-menu ".concat(a?"is-active":""),id:"navbar-menu"},s.a.createElement("div",{className:"navbar-end"},!d.isAuthenticated()&&s.a.createElement(s.a.Fragment,null,s.a.createElement(r.b,{id:"navbar-item",to:"/register",className:"navbar-item"},"Sign up"),s.a.createElement(r.b,{id:"navbar-profile",to:"/login",className:"navbar-item"},"Log in")),this.state.unseenChat?d.isAuthenticated()&&a?s.a.createElement(r.b,{to:"/profile/".concat(e.sub),id:"navbar-profile",className:"navbar-item"},"Profile ",s.a.createElement(k.c,null)):s.a.createElement(s.a.Fragment,null,s.a.createElement(r.b,{to:"/profile/".concat(e.sub),id:"navbar-profile",className:"navbar-item"},"Profile"),s.a.createElement(k.c,{className:"tibell-nav"})):d.isAuthenticated()&&s.a.createElement(r.b,{to:"/profile/".concat(e.sub),id:"navbar-profile",className:"navbar-item"},"Profile"),d.isAuthenticated()&&s.a.createElement("a",{href:"/",className:"navbar-item",id:"navbar-item",onClick:this.handleLogout},"Logout"))))}}]),a}(s.a.Component),S=Object(i.g)(j),D=function(){return s.a.createElement("section",{className:"section"},s.a.createElement("div",{className:"columns is-centered"},s.a.createElement("div",{className:"column is-half erorr-column"},s.a.createElement("h1",{className:"title"},"Woops, something went wrong!"))),s.a.createElement("div",{className:"columns is-centered"},s.a.createElement("div",{className:"column is-half is-offset-one-quarter"},s.a.createElement(r.b,{to:"/",className:"button is-warning"},"Back to Home"))))},Y=t(30),q=t(25),I=t(14),z=t.n(I),M=t(26),B=t.n(M),T=t(52),G=t.n(T),H=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(t=Object(N.a)(this,(e=Object(A.a)(a)).call.apply(e,[this].concat(s)))).state={questions:[],filterQuestions:[],selected:"",search:"",searchQuestions:[]},t.filterOptions=[{value:1,label:"Newest"},{value:2,label:"Oldest"},{value:3,label:"JavaScript"},{value:4,label:"Python"},{value:5,label:"Ruby"},{value:6,label:"Java"},{value:7,label:"Swift"},{value:8,label:"Go"},{value:9,label:"C++"},{value:10,label:"C#"},{value:11,label:"Scala"},{value:12,label:"PHP"},{value:13,label:"HTML"},{value:14,label:"CSS"},{value:15,label:"Other"}],t.getQuestions=Object(E.a)(g.a.mark((function e(){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(w.get)("/api/questions/");case 3:a=e.sent,n=a.data,console.log(n),t.setState({questions:n}),t.handleChange(t.filterOptions[0]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),t.handleChange=function(e){if(t.setState({selected:e}),1===e.value){var a=Object(Y.a)(t.state.questions).sort((function(e,a){return new z.a(a.created_at).format("YYYYMMDDHHmmss")-new z.a(e.created_at).format("YYYYMMDDHHmmss")}));t.setState({filterQuestions:a}),t.handleChangeSearch(t.state.search,a)}else if(2===e.value){var n=Object(Y.a)(t.state.questions).sort((function(e,a){return new z.a(e.created_at).format("YYYYMMDDHHmmss")-new z.a(a.created_at).format("YYYYMMDDHHmmss")}));t.setState({filterQuestions:n}),t.handleChangeSearch(t.state.search,n)}else{var s=[];t.state.questions.forEach((function(a){var t=!0,n=!1,l=void 0;try{for(var c,r=a.languages[Symbol.iterator]();!(t=(c=r.next()).done);t=!0){c.value.name===e.label&&s.push(a)}}catch(i){n=!0,l=i}finally{try{t||null==r.return||r.return()}finally{if(n)throw l}}})),t.setState({filterQuestions:s}),t.handleChangeSearch(t.state.search,s)}},t.handleChangeSearch=function(e,a){t.setState({search:e}),0===e.length&&t.setState({searchQuestions:[]});var n=a.filter((function(a){return a.title.toLowerCase().includes(e.toLowerCase())}));t.setState({searchQuestions:n})},t}return Object(y.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getQuestions()}},{key:"render",value:function(){var e=this,a=this.state,t=a.filterQuestions,n=a.searchQuestions;return s.a.createElement("div",{className:"section index-section is-fullheight-with-navbar"},s.a.createElement(G.a,null),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-half is-offset-one-quarter"},s.a.createElement("div",{className:"has-text-right"},d.isAuthenticated()?s.a.createElement(r.b,{"data-testid":"create-btn",to:"/questions/new",className:"index-button button is-warning"},"Ask a question"):s.a.createElement("p",{"data-testid":"no-create-btn",className:"no-create-btn is-size-7"},"Log in to ask a question")),s.a.createElement("input",{value:this.state.search,onChange:function(a){return e.handleChangeSearch(a.target.value,t)},className:"input index-search-bar",placeholder:"Search for a question",type:"text"}),s.a.createElement(q.a,{className:"basic-single",classNamePrefix:"type",defaultValue:this.filterOptions[0],options:this.filterOptions,onChange:this.handleChange}),s.a.createElement("div",{className:"question-section-main"},n.length>0?n.map((function(e){return s.a.createElement("div",{className:"section question-section",key:e.id},s.a.createElement(r.b,{to:"/questions/".concat(e.id)},s.a.createElement("div",{className:"index-languages"},e.languages.map((function(e){return s.a.createElement("div",{key:e.id,className:"is-inline-flex"},s.a.createElement("img",{className:"image index-image-languages",alt:e.name,src:e.image}))}))),s.a.createElement("div",{className:"searchQuestionDetail"},s.a.createElement("h5",{className:"index-question-title"},e.title),s.a.createElement("div",{className:"question-text"},B()(e.text)))))})):t.map((function(e){return s.a.createElement("div",{className:"visibleFilterQuestion section question-section",key:e.id},s.a.createElement(r.b,{to:"/questions/".concat(e.id)},s.a.createElement("div",{className:"index-languages"},e.languages.map((function(e){return s.a.createElement("div",{key:e.id,className:"is-inline-flex"},s.a.createElement("img",{className:"image index-image-languages",alt:e.name,src:e.image}))}))),s.a.createElement("div",{className:"filterQuestionDetail"},s.a.createElement("h5",{className:"index-question-title"},e.title),s.a.createElement("div",{className:"question-text"},B()(e.text)))))}))))))}}]),a}(s.a.Component),U=t(13),L=t(15),P=t(29),J=t.n(P),R=(t(33),function(e){var a=e.history,t=e.match,l=Object(n.useState)(""),c=Object(L.a)(l,2),i=c[0],o=c[1],m=Object(n.useState)({}),u=Object(L.a)(m,2),h=u[0],p=u[1],f=Object(n.useState)({}),v=Object(L.a)(f,2),b=v[0],N=v[1],A=Object(n.useState)([]),y=Object(L.a)(A,2),w=y[0],O=y[1],C=Object(n.useCallback)(Object(E.a)(g.a.mark((function e(){var a,n,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("/api/questions/".concat(t.params.id,"/"));case 3:a=e.sent,n=a.data,p(n),n.answers&&(s=n.answers.sort((function(e,a){return new z.a(e.created_at).format("YYYYMMDDHHmmss")-new z.a(a.created_at).format("YYYYMMDDHHmmss")})),O(s)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[t.params.id]),j=function(){var e=Object(E.a)(g.a.mark((function e(a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,x.a.post("/api/questions/".concat(t.params.id,"/answers/"),b,{headers:{Authorization:"Bearer ".concat(d.getToken())}});case 4:N(Object(U.a)({},b,{text:""})),N(Object(U.a)({},b,{submitted:!0})),C(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}(),S=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.delete("/api/questions/".concat(h.id,"/"),{headers:{Authorization:"Bearer ".concat(d.getToken())}});case 3:a.push("/questions"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a){return e.apply(this,arguments)}}(),D=function(){var e=Object(E.a)(g.a.mark((function e(a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.delete("/api/questions/".concat(h.id,"/answers/").concat(a,"/"),{headers:{Authorization:"Bearer ".concat(d.getToken())}});case 3:C(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){!function(){var e=d.getPayload().sub;o(e)}(),C()}),[t.params.id,C]),h.hasOwnProperty("id")?s.a.createElement("div",{className:"container detail-container"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-8 is-offset-2"},s.a.createElement("div",{className:"section"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement(r.b,{to:"/questions",className:"button is-warning"},s.a.createElement(k.a,null)," Questions")),h.owner.id===i?s.a.createElement("div",{className:"column is-offset-8"},s.a.createElement("div",{className:"detail-delete"},s.a.createElement(k.d,{onClick:S,className:"detail-delete-answer"}),s.a.createElement("p",{className:"is-size-7 detail-delete-text"},"Delete question"))):null),s.a.createElement("h1",{className:"title"},h.title),s.a.createElement("p",{className:"subtitle is-size-6"},z()(h.created_at).calendar()," by ",s.a.createElement(r.b,{className:"detail-link-user",to:"/profile/".concat(h.owner.id)},h.owner.username)),s.a.createElement("div",{className:"detail-languages"},h.languages.map((function(e){return s.a.createElement("div",{key:e.id},s.a.createElement("img",{className:"image is-24x24",src:e.image,alt:"{language.name}"}))}))),s.a.createElement("div",{className:"detail-text"},B()(h.text))),w.length>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"section"},s.a.createElement("h5",{className:"title is-size-5"},"Answers:"),w.map((function(e){return s.a.createElement("div",{className:"box",key:e.id},s.a.createElement("div",{className:"has-text-right"},e.owner.id===i&&s.a.createElement("div",{className:"detail-delete"},s.a.createElement(k.d,{onClick:function(){D(e.id)},className:"detail-delete-answer"}),s.a.createElement("p",{className:"is-size-7 detail-delete-text"},"Delete answer"))),s.a.createElement("p",{className:"is-size-7 detail-text"},z()(e.created_at).calendar()),s.a.createElement(r.b,{className:"detail-link-user",to:"/profile/".concat(e.owner.id)},s.a.createElement("p",null,e.owner.username)),s.a.createElement("div",{className:"detail-text"},B()(e.text)))})))),s.a.createElement("div",{className:"section"},d.isAuthenticated()?s.a.createElement("form",{onSubmit:j,className:"form"},s.a.createElement(J.a,{setContents:b.submitted?"Type your answer here":"",onChange:function(e){N(Object(U.a)({},b,{text:e}))},required:"True",lang:"en",placeholder:"Type your answer here",setOptions:{height:200,buttonList:[["font","fontSize","formatBlock"],["bold","underline","italic","strike","subscript","superscript"],["fontColor","hiliteColor"]]}}),s.a.createElement("button",{className:"button detail-button is-warning"},"Send")):s.a.createElement("h4",null,"You need to be ",s.a.createElement(r.b,{to:"/login"},"logged")," in to answer this question!"))))):null}),F=t(2),W=[{value:1,label:"JavaScript"},{value:2,label:"Python"},{value:3,label:"Ruby"},{value:4,label:"Java"},{value:5,label:"C++"},{value:6,label:"C#"},{value:7,label:"Swift"},{value:8,label:"Go"},{value:9,label:"PHP"},{value:10,label:"Scala"},{value:11,label:"HTML"},{value:12,label:"CSS"},{value:13,label:"Other"}],Q=function(e){var a=e.history,t=Object(n.useState)({}),l=Object(L.a)(t,2),c=l[0],r=l[1],i=Object(n.useState)({}),o=Object(L.a)(i,2),m=o[0],u=o[1],h=Object(n.useState)(""),p=Object(L.a)(h,2),f=p[0],v=p[1];Object(n.useEffect)((function(){v("")}),[c,m]);var b=function(){var e=Object(E.a)(g.a.mark((function e(t){var n,s,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=Object(U.a)({},c,{},m),e.prev=2,e.next=5,Object(w.post)("/api/questions/",n,{headers:{Authorization:"Bearer ".concat(d.getToken())}});case 5:s=e.sent,l=s.data.id,a.push("/questions/".concat(l)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),v({error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(a){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:"section"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-half is-offset-one-quarter"},s.a.createElement("div",{className:"has-text-centered"},s.a.createElement("h1",{className:"title"},"Ask a Question")),s.a.createElement("form",{className:"form",onSubmit:b},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Title"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{required:!0,className:"input",type:"text",placeholder:"Title",name:"title",onChange:function(e){var a=e.target,t=a.name,n=a.value;return r(Object(U.a)({},c,Object(F.a)({},t,n)))}}))),s.a.createElement(J.a,{onChange:function(e){return u(Object(U.a)({},m,{text:e}))},required:"True",lang:"en",placeholder:"Type your question here",setOptions:{height:200,buttonList:[["font","fontSize","formatBlock"],["bold","underline","italic","strike","subscript","superscript"],["fontColor","hiliteColor"]]}}),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Language(s)"),s.a.createElement("div",{className:"control"},s.a.createElement(q.a,{required:!0,options:W,isMulti:!0,onChange:function(e){var a=e?e.map((function(e){return e.value})):[];r(Object(U.a)({},c,{languages:a}))}}))),f&&s.a.createElement("p",{className:"is-size-7 error-message"},"Please check if all fields are filled in correctly"),s.a.createElement("div",{className:"has-text-centered"},s.a.createElement("button",{className:"button is-warning"},"Submit"))))))},V=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(t=Object(N.a)(this,(e=Object(A.a)(a)).call.apply(e,[this].concat(s)))).state={image:null},t.handleUpload=function(){var e=Object(E.a)(g.a.mark((function e(a){var n,s,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.target.files,(s=new FormData).append("file",n[0]),s.append("upload_preset","cy2iv0md"),e.next=6,x.a.post("https://api.cloudinary.com/v1_1/dabk3sktl/image/upload",s);case 6:l=e.sent,t.setState({image:l.data.url},(function(){t.props.handleChange({target:{name:t.props.fieldName,value:l.data.url}})}));case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t}return Object(y.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){var e=this.props.labelClassName?this.props.labelClassName:"default_class",a=this.state.image;return s.a.createElement(s.a.Fragment,null,a?s.a.createElement("div",null,s.a.createElement("label",{className:e},this.props.labelText),s.a.createElement("input",{className:this.props.inputClassName,type:"file",onChange:this.handleUpload})):s.a.createElement(s.a.Fragment,null,s.a.createElement("label",{className:e},this.props.labelText),s.a.createElement("input",{className:this.props.inputClassName,type:"file",onChange:this.handleUpload})))}}]),a}(s.a.Component),Z=function(e){var a=e.history,t=Object(n.useState)({}),l=Object(L.a)(t,2),c=l[0],r=l[1],i=Object(n.useState)(""),o=Object(L.a)(i,2),m=o[0],u=o[1],d=function(e){var a=e.target,t=a.name,n=a.value;r(Object(U.a)({},c,Object(F.a)({},t,n))),u("")},h=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,Object(w.post)("api/register",c);case 4:a.push("/login"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),u(e.t0),console.log(m);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(a){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:"section"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-half is-offset-one-quarter"},s.a.createElement("div",{className:"has-text-centered"},s.a.createElement("h1",{className:"title"},"Sign up")),s.a.createElement("form",{onSubmit:h,className:"form"},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Username"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{required:!0,className:"input",type:"text",placeholder:"Username",name:"username",onChange:d}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Email"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{required:!0,className:"input",type:"text",placeholder:"Email",name:"email",onChange:d}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Profile picture"),s.a.createElement("div",{className:"control"},c.image&&s.a.createElement("img",{className:"reg-profile-image image is-96x96",src:c.image,alt:"Profile"}),s.a.createElement(V,{name:"imageURL",handleChange:d,fieldName:"image",labelClassName:"my-label-class",inputClassName:"my-input-class"}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Language(s)"),s.a.createElement("div",{className:"control"},s.a.createElement(q.a,{options:W,isMulti:!0,onChange:function(e){var a=e?e.map((function(e){return e.value})):[];r(Object(U.a)({},c,{languages:a})),u("")}}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Password"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{required:!0,className:"input",type:"password",placeholder:"Password",name:"password",onChange:d}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Password confirmation"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{required:!0,className:"input",type:"password",placeholder:"Password",name:"password_confirmation",onChange:d}))),m&&s.a.createElement("p",{className:"is-size-7 error-message"},"Please check if all fields are filled in correctly"),s.a.createElement("div",{className:"has-text-centered"},s.a.createElement("button",{className:"button is-warning"},"Submit"))))))},K=function(e){var a=e.history,t=Object(n.useState)({}),l=Object(L.a)(t,2),c=l[0],r=l[1],i=Object(n.useState)(""),o=Object(L.a)(i,2),m=o[0],u=o[1],h=function(e){var a=e.target,t=a.name,n=a.value;r(Object(U.a)({},c,Object(F.a)({},t,n))),u("")},p=function(){var e=Object(E.a)(g.a.mark((function e(t){var n,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,Object(w.post)("api/login",c);case 4:n=e.sent,s=n.data,d.setToken(s.token),a.push("profile/".concat(d.getPayload().sub)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),u(e.t0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:"section"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-4 is-offset-4"},s.a.createElement("div",{className:"has-text-centered"},s.a.createElement("h1",{className:"title"},"Log in")),s.a.createElement("form",{className:"form",onSubmit:p},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Email"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{required:!0,className:"input",type:"text",placeholder:"Email",name:"email",onChange:h,value:c.email||""}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Password"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{required:!0,className:"input",type:"password",placeholder:"Password",name:"password",onChange:h,value:c.password||""}))),m&&s.a.createElement("p",{className:"is-size-7 error-message"},"Invalid credentials"),s.a.createElement("div",{className:"has-text-centered"},s.a.createElement("button",{className:"button is-warning"},"Submit"))))))},X=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(t=Object(N.a)(this,(e=Object(A.a)(a)).call.apply(e,[this].concat(s)))).state={currentUser:"",userData:{id:"",username:"",email:"",image:"",buddy:{},languages:[],chats_from:[],chats_with:[],questions:[]},messages_with:{},messages_from:{},newMessage:!1},t.getUserData=Object(E.a)(g.a.mark((function e(){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("/api/users/".concat(t.props.match.params.id,"/"),{headers:{Authorization:"Bearer ".concat(d.getToken())}});case 3:a=e.sent,n=a.data,t.setState({userData:n}),t.checkMessagesChats(n),t.orderQuestions(n.questions),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),t.orderQuestions=function(e){var a=e.sort((function(e,a){return new z.a(a.created_at).format("YYYYMMDDHHmmss")-new z.a(e.created_at).format("YYYYMMDDHHmmss")})),n=Object(U.a)({},t.state.userData,{questions:a});t.setState({userData:n})},t.checkMessagesChats=function(e){e.chats_with.forEach((function(e){e.notifications.forEach((function(a){if(a.receiver===t.state.currentUser){var n=Object(U.a)({},t.state.messages_with,{chat:e.id});t.setState({messages_with:n,newMessage:!0})}}))})),e.chats_from.forEach((function(e){e.notifications.forEach((function(a){if(a.receiver===t.state.currentUser){var n=Object(U.a)({},t.state.messages_from,{chat:e.id});t.setState({messages_from:n,newMessage:!0})}}))}))},t.handleClick=function(e){t.props.history.push("/chats/".concat(e))},t.handleNewChat=Object(E.a)(g.a.mark((function e(){var a,n,s,l,c,r,i,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=d.getPayload().sub,n=t.state.userData,s=n.chats_from,l=n.chats_with,c=!1,s.forEach((function(e){e.receiver.id===a&&(t.props.history.push("/chats/".concat(e.id)),c=!0)})),l.forEach((function(e){e.owner.id===a&&(t.props.history.push("/chats/".concat(e.id)),c=!0)})),c){e.next=18;break}return e.prev=6,r={receiver:t.state.userData.id},e.next=10,x.a.post("/api/chats/",r,{headers:{Authorization:"Bearer ".concat(d.getToken())}});case 10:i=e.sent,o=i.data,t.props.history.push("/chats/".concat(o.id)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[6,15]])}))),t}return Object(y.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=d.getPayload().sub;this.setState({currentUser:e}),this.getUserData()}},{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&this.getUserData()}},{key:"render",value:function(){var e=this,a=this.state,t=a.userData,n=a.currentUser,l=a.messages_with,c=a.messages_from,i=a.newMessage,o=[];if(t.buddy){var m=t.buddy.languages;m&&(o=Object.values(m))}return s.a.createElement("section",{className:"section profile-section"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-4 profile-fixed-column"},n===t.id?s.a.createElement("h2",null,s.a.createElement("a",{href:"#profile-user",className:"title is-size-6-mobile"},"You")):s.a.createElement("h2",null,s.a.createElement("a",{href:"#profile-user",className:"title is-size-6-mobile"},"User")),s.a.createElement("h2",null,s.a.createElement("a",{href:"#profile-buddy",className:"title is-size-6-mobile"},"Buddy")),n===t.id&&i?s.a.createElement("h2",null,s.a.createElement("a",{href:"#profile-chats",className:"title is-size-6-mobile"},"Chats ",s.a.createElement(k.c,null)," ")):n===t.id&&s.a.createElement("h2",null,s.a.createElement("a",{href:"#profile-chats",className:"title is-size-6-mobile"},"Chats")),s.a.createElement("h2",null,s.a.createElement("a",{href:"#profile-questions",className:"title is-size-6-mobile"},"Questions"))),s.a.createElement("div",{className:"column is-7 profile-column-right"},s.a.createElement("div",{id:"profile-user"},s.a.createElement("div",{className:"profile-user-top"}),s.a.createElement("div",{className:"box"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-4 is-offset-1"},s.a.createElement("img",{className:"image is-128x128",src:t.image,alt:t.username})),s.a.createElement("div",{className:"column"},s.a.createElement("p",null,"Username: ",t.username),t.languages.length>1?s.a.createElement("p",null,"Languages:"):s.a.createElement("p",null,"Language:"),t.languages.map((function(e){return s.a.createElement("div",{className:"profile-user-languages",key:e.id},s.a.createElement("img",{className:"image is-24x24",src:e.image,alt:""}),s.a.createElement("p",null,e.name))})),n===t.id?s.a.createElement("p",null,"Email: ",t.email):null)),n!==t.id?s.a.createElement("button",{className:"button is-warning",onClick:this.handleNewChat},"Chat"):null,n===t.id?s.a.createElement(r.b,{to:{pathname:"/profile/".concat(t.id,"/edit/"),state:{userData:t}},className:" button is-warning"},"Change profile"):null)),s.a.createElement("div",{id:"profile-buddy"},s.a.createElement("div",{className:"profile-buddy-top"}),s.a.createElement("div",{className:"box"},s.a.createElement("div",{className:"columns"},t.buddy?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"column is-4 is-offset-1"},s.a.createElement("img",{className:"image is-128x128",src:t.buddy.image,alt:t.buddy.username})),s.a.createElement("div",{className:"column"},s.a.createElement("p",null,"Username:  ",s.a.createElement(r.b,{to:"/profile/".concat(t.buddy.id)},t.buddy.username)),o.length>1?s.a.createElement("p",null,"Languages:"):s.a.createElement("p",null,"Language:"),o.map((function(e){return s.a.createElement("div",{className:"profile-buddy-languages",key:e.id},s.a.createElement("img",{className:"image is-24x24",src:e.image,alt:e.name}),s.a.createElement("p",null,e.name))})))):s.a.createElement("h2",{className:"is-size-5"},"Come back soon to meet your buddy!")))),n===t.id&&(t.chats_from.length>0||t.chats_with.length>0)?s.a.createElement("div",{id:"profile-chats"},s.a.createElement("div",{className:"profile-chats-top"}),s.a.createElement("div",{className:"box"},s.a.createElement(s.a.Fragment,null,t.chats_from.map((function(a){return s.a.createElement("div",{key:a.id,className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement(r.b,{to:"/profile/".concat(a.receiver.id)},a.receiver.username),s.a.createElement("p",{className:"is-size-7"},"Last message: ",z()(a.updated_at).calendar())),c.chat===a.id?s.a.createElement("div",{className:"column"},s.a.createElement("button",{className:"button is-warning",onClick:function(){return e.handleClick(a.id)}},"Chat"),s.a.createElement(k.c,null)):s.a.createElement("div",{className:"column"},s.a.createElement("button",{className:"button is-warning",onClick:function(){return e.handleClick(a.id)}},"Chat")))})),t.chats_with.map((function(a){return s.a.createElement("div",{key:a.id,className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement(r.b,{to:"/profile/".concat(a.owner.id)},a.owner.username),s.a.createElement("p",{className:"is-size-7"},"Last message: ",z()(a.updated_at).calendar())),l.chat===a.id?s.a.createElement("div",{className:"column"},s.a.createElement("button",{className:"button is-warning",onClick:function(){return e.handleClick(a.id)}},"Chat"),s.a.createElement(k.c,null)):s.a.createElement("div",{className:"column"},s.a.createElement("button",{className:"button is-warning",onClick:function(){return e.handleClick(a.id)}},"Chat")))}))))):null,n!==t.id||t.chats_from.length||t.chats_with.length?null:s.a.createElement("div",{id:"profile-chats"},s.a.createElement("div",{className:"profile-chats-top"},s.a.createElement("div",{className:"box"},s.a.createElement("p",null,"No chats yet")))),t.questions.length>0?s.a.createElement("div",{id:"profile-questions"},s.a.createElement("div",{className:"profile-questions-top"}),s.a.createElement("div",{className:"box"},t.questions.map((function(e){return s.a.createElement("div",{className:"profile-question-box",key:e.id},s.a.createElement(r.b,{to:"/questions/".concat(e.id)},s.a.createElement("div",{className:"question-title"},s.a.createElement(k.b,{className:"question-arrow"})," ",e.title)),s.a.createElement("p",{className:"subtitle is-size-7"},z()(e.created_at).calendar()))})))):s.a.createElement("div",{id:"profile-questions"},s.a.createElement("div",{className:"profile-questions-top"}),s.a.createElement("div",{className:"box"},s.a.createElement("p",null,"No questions yet"))))))}}]),a}(s.a.Component),_=Object(i.g)(X),$=function(e){var a=e.location,t=e.match,l=e.history,c=Object(n.useState)({}),r=Object(L.a)(c,2),i=r[0],o=r[1],m=Object(n.useState)([]),u=Object(L.a)(m,2),h=u[0],p=u[1],f=Object(n.useState)(""),v=Object(L.a)(f,2),b=v[0],N=v[1];Object(n.useEffect)((function(){if(a.state){!function(){var e=a.state.userData,t=[];e.languages.forEach((function(e){W.forEach((function(a){a.value===e.id&&t.push(a)}))})),o(e),p(t)}()}else l.push("/profiles/")}),[l,a.state]);var A=function(e){var a=e.target,t=a.name,n=a.value;N(""),o(Object(U.a)({},i,Object(F.a)({},t,n)))},y=function(){var e=Object(E.a)(g.a.mark((function e(a){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),(n={username:i.username,email:i.email,languages:h.map((function(e){return e.value})),image:i.image}).languages.length){e.next=5;break}return N("Please fill in all the fields"),e.abrupt("return");case 5:return e.prev=5,e.next=8,x.a.put("/api/users/".concat(t.params.id,"/"),n,{headers:{Authorization:"Bearer ".concat(d.getToken())}});case 8:l.goBack(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),N("Please check if all fields are filled in correctly");case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(a){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:"section"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-half is-offset-one-quarter"},s.a.createElement("div",{className:"has-text-centered"},s.a.createElement("h2",{className:"title"},"Edit your Profile")),s.a.createElement("form",{onSubmit:y,className:"form"},s.a.createElement("div",{classame:"field"},s.a.createElement("label",{className:"label"},"Username"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",placeholder:"Username",name:"username",onChange:A,value:i.username||""}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Email"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",placeholder:"Email",name:"email",onChange:A,value:i.email||""}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Language(s)"),s.a.createElement("div",{className:"control"},s.a.createElement(q.a,{options:W,value:h,isMulti:!0,onChange:function(e){N("");var a=e?e.map((function(e){return e})):[];o(Object(U.a)({},i,{languages:a}));var t=[];e&&e.forEach((function(e){W.forEach((function(a){a.value===e.value&&t.push(a)}))})),p(t)}}))),s.a.createElement("img",{className:"image is-128x128",src:i.image,alt:i.username}),s.a.createElement(V,{name:"image",handleChange:A,fieldName:"image",labelClassName:"my-label-class",inputClassName:"my-input-class"}),b&&s.a.createElement("p",{className:"is-size-7 error-message"},b),s.a.createElement("div",{className:"has-text-centered"},s.a.createElement("button",{className:"button is-warning"},"Save"))))))},ee=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(t=Object(N.a)(this,(e=Object(A.a)(a)).call.apply(e,[this].concat(s)))).state={messageData:{text:"",submitted:!1},currentUser:"",chatData:{owner:"",receiver:"",messages:[],updated_at:""},intervalId:null},t.scrollToBottom=function(){t.messagesEnd.scrollIntoView({block:"end"})},t.getChat=Object(E.a)(g.a.mark((function e(){var a,n,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("/api/chats/".concat(t.props.match.params.id,"/"),{headers:{Authorization:"Bearer ".concat(d.getToken())}});case 3:a=e.sent,n=a.data,t.setState({chatData:n}),s=Object(U.a)({},t.state.messageData,{submitted:!1}),t.setState({messageData:s}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),t.handleChangeEditor=function(e){var a=Object(U.a)({},t.state.messageData,{text:e});t.setState({messageData:a})},t.handleSubmit=function(){var e=Object(E.a)(g.a.mark((function e(a){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,x.a.post("/api/chats/".concat(t.props.match.params.id,"/messages/"),t.state.messageData,{headers:{Authorization:"Bearer ".concat(d.getToken())}});case 4:n=Object(U.a)({},t.state.messageData,{text:"",submitted:!0}),t.setState({messageData:n}),t.getChat(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}(),t.handleDeleteChat=function(){var e=Object(E.a)(g.a.mark((function e(a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,x.a.delete("/api/chats/".concat(t.state.chatData.id,"/"),{headers:{Authorization:"Bearer ".concat(d.getToken())}});case 4:t.props.history.goBack(""),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(a){return e.apply(this,arguments)}}(),t}return Object(y.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=d.getPayload().sub;this.setState({currentUser:a}),this.getChat();var t=setInterval((function(){return e.getChat()}),3e4);this.setState({intervalId:t})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalId)}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this,a=this.state,t=a.messageData,n=a.chatData,l=a.currentUser;return s.a.createElement("div",{className:"section chat-whole-section"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-8 is-offset-2 "},s.a.createElement("div",{className:"chat-header"},s.a.createElement("h2",{className:"title is-size-3"},n.owner.id===l?"Chat with ".concat(n.receiver.username):"Chat with ".concat(n.owner.username)),n.owner.id===l||n.receiver.id===l?s.a.createElement("div",{className:"delete-chat"},s.a.createElement(k.d,{className:"chat-delete-btn",onClick:this.handleDeleteChat}),s.a.createElement("p",{className:"is-size-7 chat-delete-text"},"Delete chat")):null),s.a.createElement("div",{className:"chat-section"},n&&n.messages.map((function(e){return s.a.createElement("div",{className:e.owner.id===l?"box chat-box has-text-right chat-text-owner":"box chat-box has-text-left chat-text-receiver",key:e.id},s.a.createElement("p",{className:"is-size-7"},z()(e.created_at).calendar()),s.a.createElement("div",null,B()(e.text)))})),s.a.createElement("div",{ref:function(a){e.messagesEnd=a}})))),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-8 is-offset-2 chat-editor"},s.a.createElement("form",{onSubmit:this.handleSubmit,className:"form"},s.a.createElement(J.a,{setContents:t.submitted?"Type your message here":"",onChange:this.handleChangeEditor,required:"True",lang:"en",placeholder:"Type your message here",setOptions:{height:50,buttonList:[["font","fontSize","formatBlock"],["bold","underline","italic","strike","subscript","superscript"],["fontColor","hiliteColor"]]}}),s.a.createElement("button",{className:"button is-warning"},"Send"))))))}}]),a}(s.a.Component);var ae=function(){return s.a.createElement(r.a,null,s.a.createElement("main",null,s.a.createElement(S,null),s.a.createElement(i.d,null,s.a.createElement(i.b,{exact:!0,path:"/",component:v}),s.a.createElement(h,{path:"/questions/new",component:Q}),s.a.createElement(i.b,{path:"/questions/:id",component:R}),s.a.createElement(i.b,{path:"/questions",component:H}),s.a.createElement(h,{path:"/profile/:id/edit",component:$}),s.a.createElement(h,{path:"/profile/:id",component:_}),s.a.createElement(i.b,{path:"/register",component:Z}),s.a.createElement(i.b,{path:"/login",component:K}),s.a.createElement(h,{path:"/chats/:id",component:ee}),s.a.createElement(i.b,{path:"*",component:D}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.837bef9a.chunk.js.map